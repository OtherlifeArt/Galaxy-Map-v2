<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>SW Galaxy Map TOOLS</title>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <!--Leaflet-->
    <link rel="stylesheet" href="scripts/vendor/leaflet/leaflet.css" />
    <!-- Leaflet Additions -->
    <link rel="stylesheet" href="scripts/vendor/Leaflet.Control.Layers.Tree/L.Control.Layers.Tree.css"/>  <!-- Controls-->
    <link rel="stylesheet" href="scripts/vendor/leaflet.fullscreen-3.0.1/Control.FullScreen.css" /> <!-- FullScreen-->
    <link rel="stylesheet" href="scripts/vendor/leaflet-search-4.0.0/dist/leaflet-search.min.css" /> <!-- Search -->
    <!-- Custom -->
    <link rel="stylesheet" href="styles/data-form/style.css">
  </head>
  <body>
    <main class="flex-parent-element">
      <div id="tool-div" class="flex-child-element">
        <h3>SW Galaxy Map TOOLS</h3>
        <div>
          <label for="api-key">API Key</label>
          <input type="text" name="api-key" id="api-key">
          <label for="client-id">Client ID</label>
          <input type="text" name="client-id" id="client-id">
          <!--Add buttons to initiate auth sequence and sign out-->
          <button id="authenticate-button" onclick="handleAuthenticateClick()">Authenticate</button>
          <button id="authorize-button" onclick="handleAuthClick()">Authorize</button>
          <button id="signout-button" onclick="handleSignoutClick()">Sign Out</button>
        </div>
        <br/>
        <!-- Tab links -->
        <div class="tab">
          <button id="default-tab" class="tablinks" onclick="openSection(event, 'astro-object-tab')">Astronomical Object</button>
          <button class="tablinks" onclick="openSection(event, 'hyper-route-tab')">Hyperroute Ploting</button>
          <button class="tablinks" onclick="openSection(event, 'automation-tools-tab')">Automated Tools</button>
          <button class="tablinks" onclick="openSection(event, 'dashboard-tab')">Dashboard</button>
        </div>

        <!-- Astronomical Object Tab -->
        <div id="astro-object-tab" class="tabcontent">
          <h3>Astronomical Object FORM</h3>
          <pre id="content" style="white-space: pre-wrap;"></pre>
          <!-- Search -->
          <div>
            <label for="object-search">Search Object</label>
            <select name="object-search" id="object-search">
              <option></option>
            </select>
          </div>
          <!-- Astro Object FORM -->
          <div>
            <form id="astro-object-form">
              <fieldset>
                <legend>Astronomical object Form</legend>
                <div>
                  <!-- IDs -->
                  <span class="tooltip">
                    <label for="object-tech-id">Technical ID</label>
                    <input type="text" name="object-tech-id" id="object-tech-id" required readonly>
                    <span class="tooltiptext">Readonly ID, created automaticly at object creation, stay the same from object creation to deletion - not to change even in spreadsheet</span>
                  </span>
                  <!-- Sorting/Human ID -->
                  <span class="tooltip">
                    <label for="object-human-id">Sorting ID</label>
                    <input type="text" name="object-human-id" id="object-human-id" readonly>
                    <span class="tooltiptext">ID used to sort data in spreadsheet, at the moment sorting is done by grid coordinates</span>
                  </span>
                  <!-- Updated At -->
                  <span class="tooltip">
                    <label for="object-updated-at">Updated at</label>
                    <input type="text" name="object-updated-at" id="object-updated-at" readonly>
                    <span class="tooltiptext">Last time updated - no data means never updated, object may need to be cheched</span>
                  </span>
                  <!-- Are Data certified ? -->
                  <span class="tooltip">
                    <label for="object-data-certified">Data certified ?</label>
                    <input type="checkbox" name="object-data-certified" id="object-data-certified">
                    <span class="tooltiptext">Are data not fully checked or insufficient ?</span>
                </div>
                <div>
                  <!-- Object Name -->
                  <span class="tooltip">
                    <label for="object-name">Object Name</label>
                    <input type="text" name="object-name" id="object-name" required>
                    <span class="tooltiptext">Full name of astronomical object (No alternate names)</span>
                  </span>
                  <span class="tooltip">
                    <!-- Capital object within its hierarchy level -->
                    <label for="object-capital">Capital ?</label>
                    <input type="checkbox" name="object-capital" id="object-capital">
                    <span class="tooltiptext">Is this object main or capital related to its neighbours (same hierarchy level.)</span>
                  </span>
                  <!-- Conjectural name -->
                  <span class="tooltip">
                    <label for="object-conjectural-name">Conjectural name ?</label>
                    <input type="checkbox" name="object-conjectural-name" id="object-conjectural-name">
                    <span class="tooltiptext">Name isn't known/definite (yet)</span>
                  </span>
                  <br/>
                  <!-- Object Alternative Names -->
                  <span class="tooltip">
                    <label for="object-alt-name">Object Alt Names</label>
                    <input type="text" name="object-alt-name" id="object-alt-name">
                    <span class="tooltiptext">Alternate names separated by "/" (slash) character</span>
                  </span>
                </div>
                <div>
                  <!-- Displayed Type -->
                  <span class="tooltip">
                    <label for="object-type-raw">Displayed Type</label>
                    <input type="text" name="object-type-raw" id="object-type-raw" readonly>
                    <span class="tooltiptext">Type as displayed in spreadsheet (readonly)</span>
                  </span>
                  <!-- Type -->
                  <span class="tooltip" id="object-type-span">
                    <label for="object-type">Type</label>
                    <select name="object-type" id="object-type">
                    </select>
                    <span class="tooltiptext">Type according to type database</span>
                  </span>
                  <!-- Conjectural type -->
                  <span class="tooltip">
                  <label for="object-conjectural-type">Conjectural type ?</label>
                  <input type="checkbox" name="object-conjectural-type" id="object-conjectural-type">
                  <span class="tooltiptext">Type isn't known/definite (yet)</span>
                </span>
                </div>
                <div>
                  <!-- Displayed Type Classes -->
                  <span class="tooltip">
                    <label for="object-type-classes-raw">Displayed Type Classes</label>
                    <input type="text" name="object-type-classes-raw" id="object-type-classes-raw" readonly>
                    <span class="tooltiptext">Type classes as displayed in spreadsheet (readonly)</span>
                  </span>
                  <!-- Type Classes -->
                  <span class="tooltip">
                  <label for="object-type-classes">Type classes</label>
                  <span id="object-type-classes" name="object-type-classes">
                    <select>
                    </select>
                  </span>
                  <span class="tooltiptext">Subtypes - "," (comma) separated</span>
                </span>
                </div>
                <div>
                  <!-- Parent -->
                  <span class="tooltip"  id="object-parent-raw-span">
                    <label for="object-parent-raw">Parents (Displayed DATA)</label>
                    <input type="text" name="object-parent-raw" id="object-parent-raw" readonly>
                    <span class="tooltiptext">Object's parent as displayed in spreadsheet (readonly)</span>
                  </span>
                  <span class="tooltip" id="object-parent-span">
                    <label for="object-parent">Parent</label>
                    <select name="object-parent" id="object-parent">
                      <option></option>
                    </select>
                    <span class="tooltiptext">Parent (with discriminating details for ambiguate object names)</span>
                  </span>
                  <br/>
                  <!-- Orbital rank -->
                  <span class="tooltip">
                    <label for="object-orbital-rank">Orbital rank</label>
                    <input type="text" name="object-orbital-rank" id="object-orbital-rank">
                    <span class="tooltiptext">How much object there is between current and central one when orbiting - central objects are 0 (zero)</span>
                  </span>
                </div>
                <div>
                  <!-- Date From -->
                  <span class="tooltip">
                    <label for="object-datefrom">Date (Year) : From</label>
                    <input type="number" name="object-datefrom" id="object-datefrom">
                    <span class="tooltiptext">Date from object data are applicable (new state, new name ...)</span>
                  </span>
                  <!-- Date To -->
                  <span class="tooltip">
                    <label for="object-dateto">To</label>
                    <input type="number" name="object-dateto" id="object-dateto">
                    <span class="tooltiptext">Date from object data are no more applicable (state change, name change ...)</span>
                  </span>
                </div>
                <div>
                  <!-- Canon -->
                  <span class="tooltip">
                    <label for="object-canon">Canon ?</label>
                    <input type="checkbox" name="object-canon" id="object-canon">
                    <span class="tooltiptext">Is object Canon ("© Disney" canon) ?</span>
                  </span>
                  <!-- Legends -->
                  <span class="tooltip">
                    <label for="object-legends">Legends ?</label>
                    <input type="checkbox" name="object-legends" id="object-legends">
                    <span class="tooltiptext">Is object Legends (original/old canon) ?</span>
                  </span>
                  <!-- In Movies -->
                  <span class="tooltip">
                    <label for="object-inmovies">In Movies ?</label>
                    <input type="checkbox" name="object-inmovies" id="object-inmovies">
                    <span class="tooltiptext">Is object present in movies ?</span>
                  </span>
                </div>
                <div>
                  <!-- Grid : X -->
                  <span class="tooltip">
                    <label for="object-grid-x">Grid : X</label>
                    <input type="text" name="object-grid-x" id="object-grid-x">
                    <span class="tooltiptext">Galactic grid abscissa (letter)</span>
                  </span>
                  <!-- Grid : Y -->
                  <span class="tooltip">
                    <label for="object-grid-y">Y</label>
                    <input type="number" name="object-grid-y" id="object-grid-y">
                    <span class="tooltiptext">Galactic grid ordinate (integer number)</span>
                  </span>
                </div>
                <div>
                  <!-- Coordinates : X -->
                  <span class="tooltip">
                    <label for="object-coord-x">Coordinates : X</label>
                    <input type="number" step="0.0000000001" name="object-coord-x" id="object-coord-x">
                    <span class="tooltiptext">Map X (abscissa) coordinates</span>
                  </span>
                  <!-- Coordinates : Y -->
                  <span class="tooltip">
                    <label for="object-coord-y">Y</label>
                    <input type="number" step="0.0000000001" name="object-coord-y" id="object-coord-y">
                    <span class="tooltiptext">Map Y (ordinate) coordinates</span>
                  </span>
                  <!-- Coordinates : Z -->
                  <span class="tooltip">
                    <label for="object-coord-z">Z</label>
                    <input type="number" step="0.0000000001" name="object-coord-z" id="object-coord-z">
                    <span class="tooltiptext">Map Z (height) coordinates</span>
                  </span>
                </div>
                <div>
                  <!-- Desc -->
                  <span class="tooltip">
                    <label for="object-desc">Description</label>
                    <textarea id="object-desc" name="object-desc"></textarea>
                    <span class="tooltiptext">Object description</span>
                  </span>
                </div>
                <div>
                  <!-- Placement certitude -->
                  <span class="tooltip">
                    <label for="object-placement-certitude">Placement certitude</label>
                    <input type="text" name="object-placement-certitude" id="object-placement-certitude">
                    <span class="tooltiptext">Indicate object placement certitude</span>
                  </span>
                  <!-- Placement logic -->
                  <span class="tooltip">
                    <label for="object-placement-logic">Placement logic</label>
                    <textarea id="object-placement-logic" name="object-placement-logic"></textarea>
                    <span class="tooltiptext">Explain object placement logic</span>
                  </span>
                </div>
                <div>
                  <!-- Native species -->
                  <span class="tooltip">
                    <label for="object-native-species">Native species</label>
                    <input type="text" name="object-native-species" id="object-native-species">
                    <span class="tooltiptext">Native species "," (comma) separated</span>
                  </span>
                  <!-- Known environments -->
                  <span class="tooltip">
                    <label for="object-known-environments">Known environments</label>
                    <input type="text" name="object-known-environments" id="object-known-environments">
                    <span class="tooltiptext">Known environments</span>
                  </span>
                </div>
                <div>
                  <!-- Notes -->
                  <span class="tooltip">
                    <label for="object-notes">Notes</label>
                    <textarea name="object-notes" id="object-notes"></textarea>
                    <span class="tooltiptext">Notes</span>
                  </span>
                  <!-- Interesting -->
                  <span class="tooltip">
                    <label for="object-interesting">Interesting</label>
                    <textarea name="object-interesting" id="object-interesting"></textarea>
                    <span class="tooltiptext">Additionnal elements of interest</span>
                  </span>
                  <br/>
                  <!-- Sources -->
                  <span class="tooltip">
                    <label for="object-sources">Source URLS</label>
                    <textarea name="object-sources" id="object-sources"></textarea>
                    <span class="tooltiptext">URLS "," (comma) separated</span>
                  </span>
                  <br/>
                  <!-- Sources Display -->
                  <span id="url-displayer">
                  </span>
                </div>
                <div>
                  <!-- Zoom level -->
                  <span class="tooltip">
                    <label for="object-zoom-level">Zoom level</label>
                    <input type="text" name="object-zoom-level" id="object-zoom-level">
                    <span class="tooltiptext">Technical data for map display</span>
                  </span>
                  <!-- Tooltip permanent -->
                  <span class="tooltip">
                    <label for="object-tooltip-permanent">Tooltip permanent</label>
                    <input type="text" name="object-tooltip-permanent" id="object-tooltip-permanent">
                    <span class="tooltiptext">Technical data for map display</span>
                  </span>
                  <!-- Tooltip direction -->
                  <span class="tooltip">
                    <label for="object-tooltip-direction">Tooltip direction</label>
                    <input type="text" name="object-tooltip-direction" id="object-tooltip-direction">
                    <span class="tooltiptext">Technical data for map display</span>
                  </span>
                  <br/>
                  <!-- Tooltip Class Name -->
                  <span class="tooltip">
                    <label for="object-class-name">Tooltip Class Name</label>
                    <input type="text" name="object-class-name" id="object-class-name">
                    <span class="tooltiptext">Technical data for map display</span>
                  </span>
                  <!-- Index Geo -->
                  <span class="tooltip">
                    <label for="object-index-geo">Geo index</label>
                    <input type="text" name="object-index-geo" id="object-index-geo">
                    <span class="tooltiptext">Technical data for map display</span>
                  </span>
                </div>
              </fieldset>
            </form>
            <button id="validation-update" class="verbose-button" onclick="showDataAndUpdate();">Update Astronomical Object With Visual Validation</button>
            <button id="data-update-button" class="verbose-button" onclick="updateData();">Update Astronomical Object</button>
            <button id="data-new-button" class="verbose-button" onclick="addNewData();">Save As New Object</button>
            <button id="data-delete-button" class="verbose-button" onclick="deleteData();">Delete selected object</button>
          </div>
        </div>
        <!-- Astro object tab end -->

        <!-- Hyper route tab -->
        <div id="hyper-route-tab" class="tabcontent">
          <h3>Hyper Route Ploting</h3>
          <p>Coming soon</p>
        </div>
        <!-- Hyper route tab end -->
        <!-- Automation tools tab -->
        <div id="automation-tools-tab" class="tabcontent">
          <h3>Automated Tools</h3>
          <button id="downloadPointsButton">Download POINTS GeoJSON</button>
          <p>Lines and polygons will come later.</p>
        </div>
        <!-- Automation tools tab end -->
        <!-- Dashboard tab -->
        <div id="dashboard-tab" class="tabcontent">
          <h3>Dashboard</h3>
          <p>Coming soon</p>
        </div>
        <!-- Dashboard tab end -->
      </div>
      <!-- Tool div end -->
      <!-- Map div -->
      <div id="map-div" class="flex-child-element">
        <h3>SW Galaxy Map Editor</h3>
        <p>Move the marker to edit X-Y coordinates of a ponctual astronomical object. TO ADD</p>
        <div class="gridsearch">
          <form action="" method="get" class="form-grid-f">
            <div class="form-grid">
              <label id="col_label" for="col">Column</label>
              <input type="text" maxlength=1 name="col_letter" id="col_letter" placeholder="Letter from A to W" required>
            </div>
            <div class="form-grid">
              <label id="line_label" for="line">Line</label>
              <input type="number" maxlength=1 name="line_num" id="line_num" placeholder="Number from 1 to 23" required>
            </div>
          </form>
          <button id="gridsearchbut">Go to grid area</button>
          <button id="gridsearchreset">Reset grid search tool</button>
        </div>
        <!-- Map -->
        <div id="map"></div>
        <!-- Map Controls -->
        <div class="map-controls"></div>
      </div>
      <!-- Map div end -->
      </main>
    <!-- The Modal -->
    <div id="validationModal" class="modal">

      <!-- Modal content -->
      <div class="modal-content">
        <span class="close">&times;</span>
        <p>
          <!-- Modal inner content -->
          <table id="modal-table">
            <caption>
              Data change
            </caption>
            <thead>
              <tr>
                <th scope="col">Name</th>
                <th scope="col">From</th>
                <th scope="col">To</th>
              </tr>
            </thead>
            <tbody id="modal-table-body"></tbody>
          </table>
        </p>
        <p>
          <!-- Buttons -->
          <button id="data-update-button" onclick="updateData();">Save DATA</button>
          <button id="close-modal-button" onclick="closeModal();">Close without saving</button>
        </p>
      </div>

    </div>
    <!-- Jquery select2 -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <!-- Leaflet -->
    <script src="scripts/vendor/leaflet/leaflet.js"></script>
    <!-- Leaflet Additions -->
    <script src="scripts/vendor/Leaflet.Control.Layers.Tree/L.Control.Layers.Tree.js"></script> <!-- Controls -->
    <!-- <script src="../libs/leaflet.ajax.min.js"></script> AJAX -->
    <script src="scripts/vendor/leaflet.fullscreen-3.0.1/Control.FullScreen.js"></script> <!-- FullScreen -->
    <script src="scripts/vendor/leaflet-search-4.0.0/dist/leaflet-search.min.js"></script> <!-- Search -->
    <!-- Font awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Website -->
    <script src="scripts/data-form/object-form.js"></script>
    <script src="scripts/data-form/automatedtools.js"></script>
    <script src="scripts/data-form/index.js"></script>
    <script src="scripts/data-form/gridv2.js"></script>  <!-- Map by Solenn Tual -->
    <script src="scripts/data-form/overlays.js"></script>  <!-- Map by Solenn Tual -->
    <script src="scripts/data-form/map.js"></script>  <!-- Map by Solenn Tual -->
    <!-- Google API -->
    <script async defer src="https://apis.google.com/js/api.js" onload="gapiLoaded()"></script>
    <script async defer src="https://accounts.google.com/gsi/client" onload="gisLoaded()"></script>
  </body>
</html>